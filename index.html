<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine üíò</title>
  <style>
    :root{
      --bg1:#ffdde1;
      --bg2:#ee9ca7;
      --card:#ffffffcc;
      --text:#2b2b2b;
      --yes:#22c55e;
      --no:#ef4444;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 20%, var(--bg1), transparent 60%),
                  radial-gradient(1000px 700px at 80% 60%, var(--bg2), transparent 55%),
                  linear-gradient(135deg, #fff, #ffeef3);
      overflow:hidden;
    }

    /* cuoricini che cadono */
    .hearts{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }
    .heart{
      position:absolute;
      top:-40px;
      font-size:22px;
      opacity:.85;
      animation: fall linear forwards;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }
    @keyframes fall{
      to{
        transform: translateY(calc(100vh + 80px)) rotate(360deg);
        opacity: 0.15;
      }
    }

    .card{
      position:relative;
      z-index:1;
      width:min(720px, 92vw);
      background:var(--card);
      backdrop-filter: blur(8px);
      border:1px solid rgba(255,255,255,.55);
      border-radius:24px;
      padding:28px 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,.15);
      text-align:center;
    }

    h1{
      margin: 0 0 10px;
      font-size: clamp(24px, 3.2vw, 40px);
      line-height:1.15;
    }
    .subtitle{
      margin:0 0 18px;
      font-size: 15px;
      opacity:.85;
    }

    .kitty{
      width:min(320px, 74vw);
      border-radius:20px;
      display:block;
      margin: 14px auto 8px;
      box-shadow: 0 14px 36px rgba(0,0,0,.18);
      border: 6px solid rgba(255,255,255,.75);
    }

    .sparkles{
      display:flex;
      gap:10px;
      justify-content:center;
      align-items:center;
      margin: 10px 0 18px;
      font-size: 18px;
      opacity:.9;
      flex-wrap:wrap;
    }
    .chip{
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(0,0,0,.06);
      padding: 6px 10px;
      border-radius: 999px;
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
    }

    /* Arena per i bottoni: cos√¨ il NO pu√≤ ‚Äúscappare‚Äù senza uscire dalla card */
    .arena{
      position:relative;
      margin: 18px auto 4px;
      width: min(520px, 86vw);
      height: 160px;
      border-radius: 18px;
      background: rgba(255,255,255,.55);
      border: 1px dashed rgba(0,0,0,.08);
      overflow:hidden;
    }

    .btn{
      border:none;
      padding: 12px 20px;
      border-radius: 14px;
      font-weight: 800;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 12px 24px rgba(0,0,0,.14);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      touch-action: manipulation;
    }
    .btn:hover{
      transform: translateY(-1px);
      box-shadow: 0 16px 30px rgba(0,0,0,.18);
      filter: brightness(1.02);
    }

    .yes{
      background: linear-gradient(135deg, #34d399, #16a34a);
      color: #fff;
      position:absolute;
      left: 26%;
      top: 56%;
      transform: translate(-50%, -50%) scale(1);
      transform-origin: center;
    }
    .no{
      background: linear-gradient(135deg, #fb7185, #ef4444);
      color:#fff;
      position:absolute;
      left: 74%;
      top: 56%;
      transform: translate(-50%, -50%);
    }

    .tip{
      margin-top:10px;
      font-size: 13px;
      opacity:.8;
    }

    /* schermata finale */
    .final{
      display:none;
      margin-top: 14px;
    }
    .final img{
      width:min(420px, 85vw);
      border-radius:18px;
      box-shadow: 0 16px 40px rgba(0,0,0,.2);
      border: 6px solid rgba(255,255,255,.8);
    }
    .final h2{
      margin: 14px 0 6px;
      font-size: clamp(20px, 2.4vw, 28px);
    }

    .hide{ display:none; }
    /* coriandoli */
.confetti-layer{
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 999;
}
.confetti{
  position: absolute;
  top: -20px;
  width: 10px;
  height: 16px;
  opacity: .95;
  transform: rotate(0deg);
  animation: confettiFall linear forwards;
  border-radius: 2px;
}
@keyframes confettiFall{
  to{
    transform: translateY(calc(100vh + 40px)) rotate(720deg);
    opacity: 0.2;
  }
}

  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div class="confetti-layer" id="confetti"></div>


  <main class="card">
    <div id="question">
      <h1>Rina, will you be my valentine? üíò</h1>

      <!-- Gattino con cuoricino (URL esterno). Se vuoi lo cambiamo con un altro. -->
      <img
      class="kitty"
      src="https://media.giphy.com/media/dBa3wZwSmXCZ1oYJjL/giphy.gif"
      alt="Gatto in attesa"
      />


      <div class="sparkles">
        <span class="chip">üíã  Promo kiss x3</span>
        <span class="chip">üç£ Bonus: Sushino together</span>
      </div>

      <div class="arena" id="arena">
        <button class="btn yes" id="yesBtn">YES üíñ</button>
        <button class="btn no" id="noBtn">NO üôÉ</button>
      </div>

      <div class="tip">Ps. ü§¨Prova a dire  "NO"</div>
    </div>

    <div class="final" id="final">
      <h2>Miawww SUSHINO CONFERMATO! ü•πüç£üíò </h2>
      <p class="subtitle">Ora sei ufficialmente la mia Valentine. ü´∂
      </p>

      <!-- GIF meme (URL esterno). Se vuoi ne metto una diversa (pi√π ‚Äúda voi‚Äù). -->
     <img 
     src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" 
     alt="Meme GIF innamorati" 
     />
    </div>
  </main>

  <script>
    const arena = document.getElementById("arena");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const question = document.getElementById("question");
    const final = document.getElementById("final");

    let yesScale = 1;
    let escapes = 0;

    // posizione iniziale NO (in px, relativo all'arena)
    function setNoPosition(x, y){
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }

    // calcola distanza tra puntatore e centro del bottone NO
    function distanceToNo(clientX, clientY){
      const rect = noBtn.getBoundingClientRect();
      const cx = rect.left + rect.width / 2;
      const cy = rect.top  + rect.height / 2;
      const dx = clientX - cx;
      const dy = clientY - cy;
      return Math.hypot(dx, dy);
    }

    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

    function moveNoAwayFrom(clientX, clientY){
      const a = arena.getBoundingClientRect();

      // coordinate del cursore relative all'arena
      const px = clientX - a.left;
      const py = clientY - a.top;

      const noRect = noBtn.getBoundingClientRect();
      const bw = noRect.width;
      const bh = noRect.height;

      // scegli una nuova posizione "lontana" dal cursore
      // facciamo alcuni tentativi e prendiamo la migliore
      let best = null;

      for(let i=0;i<18;i++){
        const x = Math.random() * (a.width  - bw) + bw/2;
        const y = Math.random() * (a.height - bh) + bh/2;

        const d = Math.hypot(x - px, y - py);
        if(!best || d > best.d) best = {x,y,d};
      }

      // assicura che resti dentro arena
      const nx = clamp(best.x, bw/2, a.width  - bw/2);
      const ny = clamp(best.y, bh/2, a.height - bh/2);

      setNoPosition(nx, ny);

      // ogni "fuga" rende YES pi√π grande (con un cap)
      escapes++;
      yesScale = Math.min(2.6, yesScale + 0.12);
      yesBtn.style.transform = `translate(-50%, -50%) scale(${yesScale})`;

      // se scappa tante volte, cambiamo anche il testo per far ridere
      if (escapes === 3) noBtn.textContent = "NO? üò≥";
      if (escapes === 6) noBtn.textContent = "MAI üôÖ";
      if (escapes === 9) noBtn.textContent = "OK BASTA üò≠";
    }

    // inizializza NO in percentuale convertita a px (cos√¨ poi lo muoviamo a px)
    function init(){
      const a = arena.getBoundingClientRect();
      const noRect = noBtn.getBoundingClientRect();
      const bw = noRect.width;
      const bh = noRect.height;

      // 74% / 56% circa
      setNoPosition(a.width*0.74, a.height*0.56);

      // anche YES lo mettiamo con left/top in px (ma resta scalabile)
      const yesRect = yesBtn.getBoundingClientRect();
      yesBtn.style.left = (a.width*0.26) + "px";
      yesBtn.style.top  = (a.height*0.56) + "px";
      yesBtn.style.transform = `translate(-50%, -50%) scale(${yesScale})`;
    }

    // Mouse: quando ti avvicini al NO, lui scappa
    document.addEventListener("mousemove", (e) => {
      const d = distanceToNo(e.clientX, e.clientY);
      // soglia di "paura"
      if (d < 90) moveNoAwayFrom(e.clientX, e.clientY);
    });

    // Mobile/touch: se provano a toccarlo, scappa
    noBtn.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      moveNoAwayFrom(e.clientX, e.clientY);
    });

    // Click YES: mostra finale + GIF
yesBtn.addEventListener("click", () => {
  question.classList.add("hide");
  final.style.display = "block";

  burstHearts(30);
  confettiBurst(180); // üéâ coriandoli
});


    // cuori che cadono (background)
    const heartsWrap = document.getElementById("hearts");
    const heartChars = ["üíó","üíò","üíñ","üíû","üíï","üíì","üò∫","üêæ"];

    function spawnHeart(){
      const s = document.createElement("div");
      s.className = "heart";
      s.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];

      const left = Math.random() * 100; // vw
      const size = 16 + Math.random()*18; // px
      const dur  = 4 + Math.random()*5; // s

      s.style.left = left + "vw";
      s.style.fontSize = size + "px";
      s.style.animationDuration = dur + "s";

      heartsWrap.appendChild(s);
      setTimeout(()=> s.remove(), (dur*1000)+300);
    }

    function burstHearts(n){
      for(let i=0;i<n;i++){
        setTimeout(spawnHeart, i*40);
      }
    }
// coriandoli
const confettiWrap = document.getElementById("confetti");

function spawnConfettiPiece(){
  const c = document.createElement("div");
  c.className = "confetti";

  // posizione e dimensione
  c.style.left = (Math.random() * 100) + "vw";
  const w = 6 + Math.random() * 10;
  const h = 10 + Math.random() * 16;
  c.style.width = w + "px";
  c.style.height = h + "px";

  // colore random (senza hardcodare palette? qui una piccola palette carina)
  const colors = ["#ff4d6d","#ffb703","#06d6a0","#4cc9f0","#b5179e","#ffcad4"];
  c.style.background = colors[Math.floor(Math.random() * colors.length)];

  // durata random
  const dur = 2.5 + Math.random() * 2.5;
  c.style.animationDuration = dur + "s";

  confettiWrap.appendChild(c);
  setTimeout(()=> c.remove(), (dur * 1000) + 200);
}

function confettiBurst(total = 120){
  for(let i=0;i<total;i++){
    setTimeout(spawnConfettiPiece, i * 15);
  }
}

    // avvio
    init();
    setInterval(spawnHeart, 450);
    window.addEventListener("resize", init);
  </script>
</body>
</html>
